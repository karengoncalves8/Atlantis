import Processo from "../../abstracoes/processo"
import Armazem from "../../dominio/armazem"
import MenuEscolherCliente from "../../menus/menuEscolherCliente"
import Cliente from "../../modelos/cliente"

export default class ExcluirCliente extends Processo {
    private clientes: Cliente[]

    constructor() {
        super()
        this.clientes = Armazem.InstanciaUnica.Clientes.filter((cliente) => cliente.Titular !== undefined)
        this.menu = new MenuEscolherCliente(this.clientes)
        this.execucao = true
    }
    
    processar(): void {
        console.clear()

        while (this.execucao) {
            this.menu.mostrar()
            this.opcao = this.entrada.receberNumero('Qual cliente deseja excluir?')
            let cliente = this.clientes[this.opcao - 1]
            if(this.opcao == 0){
                this.execucao = false
            }
            else if(cliente){
                Armazem.InstanciaUnica.Clientes = [...this.clientes.slice(0, this.opcao - 1), ...this.clientes.slice(this.opcao)]
            }else{
                console.log('Cliente não encontrado')
                this.execucao = false
            }

        }

        console.log('Finalizando edição do cliente...')
    }
}